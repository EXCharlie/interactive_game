(function(){"use strict";var e={6339:function(e,t,n){var c=n(5130),s=n(6768),i=n(4232);const o={class:"min-h-screen flex items-center justify-center bg-gray-100 dark:bg-gray-900 transition-colors"};function r(e,t,n,c,r,a){const p=(0,s.g2)("StartScreen"),u=(0,s.g2)("GameScreen");return(0,s.uX)(),(0,s.CE)("div",{class:(0,i.C4)(r.theme)},[(0,s.Lk)("div",o,["start"===r.gameState?((0,s.uX)(),(0,s.Wv)(p,{key:0,theme:r.theme,onStart:a.startGame,onToggleTheme:a.toggleTheme},null,8,["theme","onStart","onToggleTheme"])):(0,s.Q3)("",!0),"play"===r.gameState?((0,s.uX)(),(0,s.Wv)(u,{key:1,sceneId:r.currentScene,theme:r.theme,onRestart:a.restartGame},null,8,["sceneId","theme","onRestart"])):(0,s.Q3)("",!0)])],2)}const a={class:"title"};function p(e,t,n,c,o,r){return(0,s.uX)(),(0,s.CE)("div",{class:(0,i.C4)(["container","dark"===n.theme?"dark":""])},[(0,s.Lk)("h1",a,(0,i.v_)(o.gameTitle),1),(0,s.Lk)("p",{class:(0,i.C4)(["description","dark"===n.theme?"dark":""])},(0,i.v_)(o.gameDescription),3),(0,s.Lk)("button",{onClick:t[0]||(t[0]=t=>e.$emit("start")),class:"btn"},"开始游戏"),(0,s.Lk)("button",{onClick:t[1]||(t[1]=t=>e.$emit("toggle-theme")),class:(0,i.C4)(["btn","toggle-btn","dark"===n.theme?"dark":""])}," 切换为 "+(0,i.v_)("light"===n.theme?"深色":"浅色")+"模式 ",3)],2)}var u=JSON.parse('{"yu":{"DD":"无法逃离的星期八demo","h_":"顾醒被困教学楼，完成任务才能离开，在经历中救赎自我","L7":"scene1"},"ai":{"scene1":{"actions":[{"type":"text","content":"放学铃响，顾醒急着回家抽卡，却在教学楼出口撞上空气墙，系统要求完成任务才能离开。你选择："},{"type":"options","options":[{"text":"返回教室想办法","effects":[{"actionType":"jump","targetScene":"scene2"}]},{"text":"尝试强行突破","effects":[{"actionType":"jump","targetScene":"scene3"}]}]}]},"scene2":{"actions":[{"type":"text","content":"回到教室，写下的\'help\'自动消失，只能开始写作业。写完英语作业时，作业突然被撞落。你选择："},{"type":"options","options":[{"text":"向同学Y求助","effects":[{"actionType":"jump","targetScene":"scene4"}]},{"text":"自己重新整理","effects":[{"actionType":"jump","targetScene":"scene5"}]}]}]},"scene3":{"actions":[{"type":"text","content":"强行突破失败，还被空气墙反弹受伤。此时听到隔壁班声响，你选择："},{"type":"options","options":[{"text":"去隔壁班查看","effects":[{"actionType":"jump","targetScene":"scene6"}]},{"text":"继续尝试突破","effects":[{"actionType":"jump","targetScene":"scene7"}]}]}]},"scene4":{"actions":[{"type":"text","content":"向Y求助，遭到冷漠拒绝，作业还被撕毁。绝望下你想从三楼窗台跳下，被B用拖把拽回。你选择："},{"type":"options","options":[{"text":"听从B的劝告","effects":[{"actionType":"jump","targetScene":"scene8"}]},{"text":"再次尝试跳楼","effects":[{"actionType":"jump","targetScene":"scene9"}]}]}]},"scene5":{"actions":[{"type":"text","content":"自己整理好作业，发现作业进度条推进。此时听到储物柜有闷响，你选择："},{"type":"options","options":[{"text":"查看储物柜","effects":[{"actionType":"jump","targetScene":"scene10"}]},{"text":"继续写作业","effects":[{"actionType":"jump","targetScene":"scene11"}]}]}]},"scene6":{"actions":[{"type":"text","content":"看到Z被同学用书砸，地上的《罪与罚》刺痛了你。你选择："},{"type":"options","options":[{"text":"扶起Z帮忙","effects":[{"actionType":"jump","targetScene":"scene12"}]},{"text":"转身离开","effects":[{"actionType":"jump","targetScene":"scene13"}]}]}]},"scene7":{"actions":[{"type":"text","content":"持续尝试突破，体力不支陷入昏迷，任务失败。"},{"type":"ending","name":"失败结局","description":"固执尝试突破，最终未能完成任务。"}]},"scene8":{"actions":[{"type":"text","content":"听从B劝告，继续完成作业。完成时系统提示音响起，你选择："},{"type":"options","options":[{"text":"直接冲向校门","effects":[{"actionType":"jump","targetScene":"scene14"}]},{"text":"查看储物柜情况","effects":[{"actionType":"jump","targetScene":"scene10"}]}]}]},"scene9":{"actions":[{"type":"text","content":"再次跳楼，摔成重伤，任务失败。"},{"type":"ending","name":"悲惨结局","description":"极端行为导致失败，未能完成任务。"}]},"scene10":{"actions":[{"type":"text","content":"打开储物柜，镜子映出你曾经霸凌的画面。你选择："},{"type":"options","options":[{"text":"直面过往","effects":[{"actionType":"jump","targetScene":"scene15"}]},{"text":"逃避离开","effects":[{"actionType":"jump","targetScene":"scene16"}]}]}]},"scene11":{"actions":[{"type":"text","content":"持续写作业，完成所有作业后，顺利离开教学楼。"},{"type":"ending","name":"普通结局","description":"完成作业离开，未直面内心。"}]},"scene12":{"actions":[{"type":"text","content":"扶起Z听他倾诉，任务进度条推进。完成作业后，系统提示响起。你选择："},{"type":"options","options":[{"text":"和Z一起冲向校门","effects":[{"actionType":"jump","targetScene":"scene17"}]},{"text":"独自冲向校门","effects":[{"actionType":"jump","targetScene":"scene18"}]}]}]},"scene13":{"actions":[{"type":"text","content":"转身离开，后续任务无法推进，最终失败。"},{"type":"ending","name":"冷漠结局","description":"冷漠旁观，未能完成任务。"}]},"scene14":{"actions":[{"type":"text","content":"直接冲向校门，离开时未直面过往，心中留有遗憾。"},{"type":"ending","name":"遗憾结局","description":"匆忙离开，未解开内心枷锁。"}]},"scene15":{"actions":[{"type":"text","content":"直面霸凌画面，抓住Z的手一起冲向校门，成功完成救赎。"},{"type":"ending","name":"完美结局","description":"直面过去，完成自我救赎。"}]},"scene16":{"actions":[{"type":"text","content":"逃避离开，后续任务受阻，最终失败。"},{"type":"ending","name":"逃避结局","description":"不敢面对，任务失败。"}]},"scene17":{"actions":[{"type":"text","content":"和Z一起冲向校门，踏出校门作业化作文字，Z消失，你完成救赎。"},{"type":"ending","name":"救赎结局","description":"帮助他人，完成自我救赎。"}]},"scene18":{"actions":[{"type":"text","content":"独自冲向校门，离开时虽完成任务，但内心仍有愧疚。"},{"type":"ending","name":"不完整结局","description":"完成任务，却未完全释怀。"}]}}}'),l={props:["theme"],data(){return{gameTitle:u.yu.DD,gameDescription:u.yu.h_}}},h=n(1241);const g=(0,h.A)(l,[["render",p],["__scopeId","data-v-fc6331ea"]]);var y=g;const m={class:"message-list",ref:"messageList"},f={key:0,class:"typing"},d={key:1,class:"choices"},x=["onClick"],v={key:2,class:"ending"},T={class:"ending-title"},S={class:"ending-desc"};function k(e,t,n,c,o,r){return(0,s.uX)(),(0,s.CE)("div",{class:(0,i.C4)(["container","dark"===n.theme?"dark":""]),ref:"container"},[(0,s.Lk)("div",m,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(o.messages,((e,t)=>((0,s.uX)(),(0,s.CE)("div",{key:t,class:(0,i.C4)(["message","choice"===e.type?"message-choice":"message-text"])},(0,i.v_)(e.content),3)))),128))],512),o.typingText?((0,s.uX)(),(0,s.CE)("div",f,(0,i.v_)(o.typingText),1)):(0,s.Q3)("",!0),"options"===o.currentAction?.type?((0,s.uX)(),(0,s.CE)("div",d,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(o.currentAction.options,((e,t)=>((0,s.uX)(),(0,s.CE)("button",{key:t,class:"btn choice-btn",onClick:t=>r.handleOption(e)},(0,i.v_)(e.text),9,x)))),128))])):(0,s.Q3)("",!0),"ending"===o.currentAction?.type?((0,s.uX)(),(0,s.CE)("div",v,[(0,s.Lk)("h2",T,(0,i.v_)(o.currentAction.name),1),(0,s.Lk)("p",S,(0,i.v_)(o.currentAction.description),1),(0,s.Lk)("button",{onClick:t[0]||(t[0]=t=>e.$emit("restart")),class:"btn return-btn"}," 返回开始界面 ")])):(0,s.Q3)("",!0)],2)}n(4114);class b{constructor(){this.scenes=u.ai,this.startScene=u.yu.L7,this.state={}}getScene(e){return this.scenes[e]}applyEffects(e){let t=null;for(const n of e){const{actionType:e}=n;if("jump"===e)t=n.targetScene;else if("update"===e)this.state[n.property]=n.value;else if("condition"===e){const e=this.state[n.test];t=e?n.trueTarget:n.falseTarget}}return t}reset(){this.state={}}}var j={props:["sceneId","theme"],data(){return{manager:new b,currentActionIndex:0,currentActions:[],currentAction:null,typingText:"",messages:[],isTyping:!1}},watch:{sceneId(e){this.loadScene(e)}},mounted(){this.loadScene(this.sceneId)},methods:{loadScene(e){const t=this.manager.getScene(e);this.currentActions=t.actions,this.currentActionIndex=0,this.typingText="",this.nextAction()},nextAction(){if(this.currentActionIndex>=this.currentActions.length)return void(this.currentAction=null);const e=this.currentActions[this.currentActionIndex];this.currentAction=e,"text"===e.type?(this.typingText="",this.isTyping=!0,this.typeOut(e.content,(()=>{this.messages.push({content:e.content,type:"text"}),this.isTyping=!1,this.scrollToBottom(),this.currentActionIndex++,this.nextAction()}))):"delay"===e.type?setTimeout((()=>{this.currentActionIndex++,this.nextAction()}),e.duration||1e3):"options"===e.type||e.type},typeOut(e,t){let n=0;const c=30,s=setInterval((()=>{n<e.length?(this.typingText+=e[n],n++):(clearInterval(s),this.typingText="",t())}),c)},handleOption(e){this.messages.push({content:`→ 你选择了：${e.text}`,type:"choice"}),this.scrollToBottom();const t=this.manager.applyEffects(e.effects);this.loadScene(t)},scrollToBottom(){this.$nextTick((()=>{const e=this.$refs.messageList;e&&(e.scrollTop=e.scrollHeight)}))}}};const A=(0,h.A)(j,[["render",k],["__scopeId","data-v-13fa0397"]]);var C=A,_={components:{StartScreen:y,GameScreen:C},data(){return{gameState:"start",currentScene:"scene1",manager:new b,theme:"light"}},methods:{startGame(){this.manager.reset(),this.currentScene=this.manager.startScene,this.gameState="play"},restartGame(){this.gameState="start"},toggleTheme(){this.theme="light"===this.theme?"dark":"light"}}};const I=(0,h.A)(_,[["render",r]]);var O=I;(0,c.Ef)(O).mount("#app")}},t={};function n(c){var s=t[c];if(void 0!==s)return s.exports;var i=t[c]={exports:{}};return e[c].call(i.exports,i,i.exports,n),i.exports}n.m=e,function(){var e=[];n.O=function(t,c,s,i){if(!c){var o=1/0;for(u=0;u<e.length;u++){c=e[u][0],s=e[u][1],i=e[u][2];for(var r=!0,a=0;a<c.length;a++)(!1&i||o>=i)&&Object.keys(n.O).every((function(e){return n.O[e](c[a])}))?c.splice(a--,1):(r=!1,i<o&&(o=i));if(r){e.splice(u--,1);var p=s();void 0!==p&&(t=p)}}return t}i=i||0;for(var u=e.length;u>0&&e[u-1][2]>i;u--)e[u]=e[u-1];e[u]=[c,s,i]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var c in t)n.o(t,c)&&!n.o(e,c)&&Object.defineProperty(e,c,{enumerable:!0,get:t[c]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={524:0};n.O.j=function(t){return 0===e[t]};var t=function(t,c){var s,i,o=c[0],r=c[1],a=c[2],p=0;if(o.some((function(t){return 0!==e[t]}))){for(s in r)n.o(r,s)&&(n.m[s]=r[s]);if(a)var u=a(n)}for(t&&t(c);p<o.length;p++)i=o[p],n.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return n.O(u)},c=self["webpackChunkinteractive_game"]=self["webpackChunkinteractive_game"]||[];c.forEach(t.bind(null,0)),c.push=t.bind(null,c.push.bind(c))}();var c=n.O(void 0,[504],(function(){return n(6339)}));c=n.O(c)})();
//# sourceMappingURL=app.f3983030.js.map